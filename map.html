<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <title>my map</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

  <link rel="stylesheet" href="//code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
  <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="//code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

  <script type="text/javascript"
          src="//openapi.map.naver.com/openapi/naverMap.naver?ver=2.0&key=e8fc15d32855da6ec1ec0d296b75907e"></script>
</head>
<body style="height:100%;margin:0;padding:0;">

<div id="wrapper" style="min-height:100%;position:relative;">
  <div id="map" style="border:none; width:0px; height:0px; margin:0px;"></div>
</div>

<style>
  #infownd {
    border-top: 1px solid;
    border-bottom: 2px groove black;
    border-left: 1px solid;
    border-right: 2px groove black;
    margin-bottom: 1px;
    color: black;
    width: 100%;
    height: auto;
    background: #00B7FF;
  }

  #infownd div {
    color: #000000 !important;
    display: inline-block;
    font-size: 12px !important;
    font-weight: bold !important;
    letter-spacing: -1px !important;
    white-space: nowrap !important;
    padding: 2px 5px 2px 2px !important;
    /*width: 500px;*/
    background: #ff4a27;
  }


</style>

<script type="text/javascript">
  var screenWidth = $(window).width();
  var screenHeight = $(window).height();

  $(window).resize(function () {
    screenWidth = $(window).width();
    screenHeight = $(window).height();
    oMap.setSize(new nhn.api.map.Size(screenWidth, screenHeight));
  });

  var oPoint = new nhn.api.map.LatLng(37.5049163, 127.024824);
  nhn.api.map.setDefaultPoint('LatLng');
  oMap = new nhn.api.map.Map('map', {
    point: oPoint,
    zoom: 13,
    enableWheelZoom: true,
    enableDragPan: true,
    enableDblClickZoom: false,
    mapMode: 0,
    activateTrafficMap: false,
    activateBicycleMap: false,
    minMaxLevel: [1, 14],
    size: new nhn.api.map.Size(screenWidth, screenHeight)
  });

  oMap.attach('click', function (oCustomEvent) {
    console.log('##CLICK');
    var oPoint = oCustomEvent.point;
    var oTarget = oCustomEvent.target;
    var newPoint = null;
    oInfoWnd.setVisible(false);
    $.getJSON("http://openapi.map.naver.com/api/reversegeocode?key=e8fc15d32855da6ec1ec0d296b75907e&encoding=utf-8&coord=latlng&callback=?&output=json&query=" + oPoint.x + "," + oPoint.y,
        function (data) {
          console.log(data)
          for (var i in data.result.items) {
            console.log("address:", data.result.items[i].address);
            console.log("point:", data.result.items[i].point);
            console.log("isRoadAddress:", data.result.items[i].isRoadAddress);
            if (data.result.items[i].isRoadAddress) {
              console.log(data.result.items[i].addrdetail.rest);
              var addr = [data.result.items[i].addrdetail.sigugun,
                data.result.items[i].addrdetail.dongmyun,
                data.result.items[i].addrdetail.rest];
              newPoint = new nhn.api.map.LatLng(data.result.items[i].point.y, data.result.items[i].point.x)
              oInfoWnd.setContent('<div id="infownd">' +
                  '<div>' + addr.join(' ') + '</div></div>');
              oInfoWnd.setPoint(newPoint);
              oInfoWnd.setPosition({right: 10, top: 10});
              oInfoWnd.setVisible(true);
              oInfoWnd.autoPosition();
            }
          }
        });

  });

  var oInfoWnd = new nhn.api.map.InfoWindow();
  oInfoWnd.setVisible(false);
  oMap.addOverlay(oInfoWnd);
</script>

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

</body>
</html>
